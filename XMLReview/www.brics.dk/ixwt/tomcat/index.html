<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<title>An Introduction to XML and Web Technologies</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<LINK REL="SHORTCUT ICON" HREF="brics.ico">
<link href="../style.css" rel=stylesheet type="text/css">
</head>
<body>  

<h1>Quick guide to installing a Tomcat server and a simple application</h1>

The following instructions are for <b>Tomcat 7.0</b> and assume that 
<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java 6</a> is already installed. 
<!-- 
The environment variable <tt>JAVA_HOME</tt> must be set to the directory where Java is installed. (<a href="java_home.html">Look here</a> to get help
for setting <tt>JAVA_HOME</tt>.) -->

<h2>Installing Tomcat on Windows</h2>

<ol class=info>
<li>Download and run the "Core: Windows Service Installer" from 
<tt><a href="http://tomcat.apache.org/download-70.cgi">http://tomcat.apache.org/download-70.cgi</a></tt>.
<li> Click "Next", "I Agree", "Next", choose User Name and Password (that you can remember), click "Next",
select the path for your Java installation (e.g. <tt>jdk.6.0_23</tt>), click "Next", "Install" and 
(after a while) "Finish". 
The Tomcat server should now be running and there is an icon <img src="tomcat-monitor.png" alt=""> 
in the task bar where you can start and stop the server. 
Also, you should have an "Apache Tomcat 7.0" entry in your Start / All Programs menu.
<li> Open Start / All Programs / Apache Tomcat 7.0 / Tomcat 7.0 Program Directory. Open the <tt>conf</tt>
directory and edit the file <tt>tomcat-users.xml</tt> by adding an entry containing
<pre>
  &lt;user name="..." password="..." roles="manager-gui"/>
</pre>
with your chosen User Name and Password.
<li> Try opening <tt>http://localhost:<i>8080</i></tt> from a browser.
This should result in a test page saying "<i>If you're seeing this page via a web browser, it means you've setup Tomcat successfully. Congratulations!</i>"
</ol>

<h2>Installing Tomcat on Linux</h2>

<ol class=info>
<li>Download the "Core: tar.gz" file from <tt><a href="http://tomcat.apache.org/download-70.cgi">http://tomcat.apache.org/download-70.cgi</a></tt>.
<li>Unpack the file (using this command, for example: <tt>tar xzf apache-tomcat-7.0.*.tar.gz</tt>).

<li>Add an entry to the file <tt>conf/tomcat-users.xml</tt> containing
<pre>
  &lt;user name="..." password="..." roles="manager-gui"/>
</pre>
where you choose (and remember) the name and password.
<li> Start the server with the command <tt>bin/startup.sh</tt>. Later, you 
can use <tt>bin/shutdown.sh</tt> to stop it.
Note that these commands should be executed with the Tomcat main directory being the current working directory.
<li> Try opening <tt>http://localhost:8080</tt> 
from a browser. This should result in a 
test page saying 
"<i>If you're seeing this page via a web browser, it means you've setup Tomcat successfully. Congratulations!</i>"
</ol>

<h2>Installing Tomcat on Mac OS X</h2>

<ol class=info>
<li>Download the "Core: tar.gz" file from <tt><a href="http://tomcat.apache.org/download-70.cgi">http://tomcat.apache.org/download-70.cgi</a></tt>.
    The zip file will not do, you must download the "tar.gz" version of the archive.
<li>Open a terminal, in Mac OS X it is located in
<tt>/Applications/Utilities/Terminal.app</tt>.
<li>Navigate to the directory containing the archive you downloaded 
(using this command, for example: <tt>cd /Users/username/Downloads</tt>.
<li>Unpack the file (using this command, for example: <tt>tar xzf apache-tomcat-7.0.*.tar.gz</tt>).

<li>Add an entry to the file <tt>conf/tomcat-users.xml</tt> containing
<pre>
  &lt;user name="..." password="..." roles="manager-gui"/>
</pre>
where you choose (and remember) the name and password.
<li> Start the server with the command <tt>bin/startup.sh</tt>. Later, you 
can use <tt>bin/shutdown.sh</tt> to stop it.
Note that these commands should be executed with the Tomcat main directory being the current working directory.
<li> Try opening <tt>http://localhost:8080</tt> 
from a browser. This should result in a 
test page saying 
"<i>If you're seeing this page via a web browser, it means you've setup Tomcat successfully. Congratulations!</i>"
</ol>

<h2>Installing a simple application</h2>

The following steps are for Windows; with Linux, the "Tomcat 7.0 Program Directory" is the main directory obtained when
the <tt>tar.gz</tt> installation file has been unpacked.

<ol class=info>
<li> We will now <b>install</b> a simple "hello world" service (see p. 391 in the book).
Open Start / All Programs / Apache Tomcat 7.0 / Tomcat 7.0 Program Directory. Open the <tt>webapps</tt>
 directory.
Create a sub-directory <tt>test-app</tt> of <tt>webapps</tt>, a sub-directory <tt>WEB-INF</tt> 
of <tt>test-app</tt>, and
a sub-directory <tt>classes</tt> of <tt>WEB-INF</tt>. Then download <tt><a href="web.xml">web.xml</a></tt>
and put it in the <tt>WEB-INF</tt> directory, and download <tt><a href="HelloWorld.class">HelloWorld.class</a></tt>
and put it in the <tt>classes</tt> directory. 
That is, the files and directories are structured as follows (see also
Section 9.3.1):
<table cellpadding=0 cellspacing=0 class=box>
<tr><td width=50><td><img src="folder.png" alt="">&nbsp;<tt>webapps</tt>
<tr><td><td><img src="last.png" alt=""><img src="folder.png" alt="">&nbsp;<tt>test-app</tt>
<tr><td><td><img src="blank.png" alt=""><img src="last.png" alt=""><img src="folder.png" alt="">&nbsp;<tt>WEB-INF</tt>
<tr><td><td><img src="blank.png" alt=""><img src="blank.png" alt=""><img src="next.png" alt=""><img src="xml.png" alt="">&nbsp;<tt>web.xml</tt>
<tr><td><td><img src="blank.png" alt=""><img src="blank.png" alt=""><img src="last.png" alt=""><img src="folder.png" alt="">&nbsp;<tt>classes</tt>
<tr><td><td><img src="blank.png" alt=""><img src="blank.png" alt=""><img src="blank.png" alt=""><img src="last.png" alt=""><img src="class.png" alt="">&nbsp;<tt>HelloWorld.class</tt>
</table>
<p>

<li> To <b>start</b> the test application, 
open <tt>http://localhost:8080/manager</tt>
in a browser. Use the user name and password picked when installing Tomcat. 
Find <tt>/test-app</tt> in the list of applications and click the "Start" button to the right.

<li> To <b>run</b> the hello world service, try opening
<tt>http://localhost:8080/test-app/TEST</tt> in a browser. The response should look something like this:
<center><img border="1" src="helloworld.png" alt=""></center>
</ol>

Tips for running your own applications:

<ul class=info>
<li>By default, the server will use port 8080. This can be changed in the file 
<tt>conf/server.xml</tt> (look for <tt>port="8080"</tt>). 
<li> To <b>compile</b> servlets, you need to include <tt>servlet-api.jar</tt> (which
can be found in the <tt>lib</tt> directory in the Tomcat 7.0 Program Directory)
in the class path.

<li> In case you later change some of the files in a running application, you need to 
instruct Tomcat to <b>reload</b> the application before all changes take effect. This can be done 
by opening <tt>http://localhost:8080/manager</tt> in a browser and clicking on the "Reload" 
button for your application.

<li> The <b>server log files</b>, which are useful 
when debugging, can be found in the <tt>logs</tt> directory in the Tomcat 7.0 Program Directory. 
(On Windows, the log level can be set in the configuration tool, for example to "Debug").

<li> If your application uses <b>JSTL</b>, you additionally need 
<tt>jstl.jar</tt>, <tt>standard.jar</tt>, and likely also <tt>xalan.jar</tt>
in <tt>WEB-INF/lib</tt>. You can get 
those jars from <tt><a href="http://jakarta.apache.org/site/downloads/downloads_taglibs-standard.cgi">http://jakarta.apache.org/site/downloads/downloads_taglibs-standard.cgi</a></tt> and <tt><a href="http://www.apache.org/dist/xml/xerces-j/">http://www.apache.org/dist/xml/xerces-j/</a></tt>.

</ul>

<p>
<center>
<a href="http://www.brics.dk/ixwt/"><img src="../left.gif" alt="" border=0></a> <a href="http://www.brics.dk/ixwt/">back to the main page</a>
</center>

<p>

<center class="footer">
   <table border="0" cellpadding="0" cellspacing="0" width="100%">

  <tbody><tr>
    <td bgcolor="#3366cc"><img alt="" height="1" width="1" src="../back.gif"></td>
  </tr>
</tbody></table>
  <table bgcolor="#e5ecf9" border="0" cellpadding="2" cellspacing="0" width="100%">
    <tbody><tr>
      <td bgcolor="#e5ecf9" nowrap="nowrap"><table border="0" cellpadding="0" cellspacing="0" width="100%">
          <tbody><tr>
            <td align="right" nowrap="nowrap"><i><a href="mailto:amoeller@cs.au.dk,mis@cs.au.dk?subject=An%20Introduction%20to%20XML%20and%20Web%20Technologies">Anders M&oslash;ller &amp; Michael I. Schwartzbach</a>, last update: January 19, 2011</i></td>
          </tr>
      </tbody></table></td>
    </tr>
  </tbody></table>
</center>

</body>
</html>
